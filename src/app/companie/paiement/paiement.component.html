<mat-card-content>
  <mat-accordion class="example-headers-align">
    <!-- <button *ngIf="!stripeCust.id" mat-raised-button color="primary" (click)="saveCustInStripe()">{{'Welcome ! I go for it'}}</button> -->

    <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{'Registration' | translate}}
        </mat-panel-title>
      </mat-expansion-panel-header>

      <button *ngIf="!stripeCust.id" mat-raised-button color="primary" color="primary" (click)="saveCustInStripe()">Welcome!</button>
      <!-- <button mat-raised-button color="primary" (click)="saveCustInStripe()">Plan SIlver (44$)</button> -->

      <button *ngIf="stripeCust.id" mat-raised-button color="primary" (click)="deleteCustInStripe()">deleteCustInStripe</button>
      <!-- <div *ngIf="stripeCust.id"> -->
      <!-- <mat-form-field>
          <input matInput value="{{stripeCust.id}}" placeholder="ID">
        </mat-form-field> -->

      <!-- <div class="form-control">
          {{stripeCust.created | timestampToDate}}
        </div>
        <div class="form-control">
          {{stripeCust.email}}
        </div> -->

      <!-- </div> -->
      <!-- <mat-action-row> -->
      <!-- <div *ngIf="!stripeCust.id">
          <button mat-button color="primary" (click)="saveCustInStripe()">I go for it!</button>
        </div> -->
      <!-- <div *ngIf="stripeCust.id"> -->
      <!-- <button type="button" class="done" (click)="deleteCustInStripe()">deleteCustInStripe</button> -->
      <!-- <button mat-button color="primary" (click)="nextStep()">Next</button> -->
      <!-- </div>
      </mat-action-row> -->
    </mat-expansion-panel>


    <mat-expansion-panel *ngIf="stripeCust.id" [expanded]="step === 1" (opened)="setStep(1)" hideToggle="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{'Plan' | translate}}
        </mat-panel-title>
      </mat-expansion-panel-header>


      <mat-button-toggle-group [(ngModel)]="plan" (change)="changePlan()">
        <mat-button-toggle value="silver">
          Silver
          <mat-icon>format_align_left</mat-icon>
        </mat-button-toggle>
        <mat-button-toggle value="gold">
          Gold
          <mat-icon>format_align_center</mat-icon>
        </mat-button-toggle>
        <mat-button-toggle value="platinium">
          Platinium
          <mat-icon>format_align_right</mat-icon>
        </mat-button-toggle>
      </mat-button-toggle-group>


    </mat-expansion-panel>


    <mat-expansion-panel *ngIf="stripeCust.id && plan" [expanded]="step === 2" (opened)="setStep(2)" hideToggle="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{'Card' | translate}}
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div *ngIf="!stripeCust.sources.data.length">
        <h6>Create a new card</h6>
        <mat-form-field>
          <input matInput type="text" [(ngModel)]="newCard.address_city" placeholder="address_city">
        </mat-form-field>
        <mat-form-field>
          <input matInput type="text" [(ngModel)]="newCard.address_country" placeholder="address_country">
        </mat-form-field>
        <mat-form-field>
          <input matInput type="text" [(ngModel)]="newCard.address_line1" placeholder="address_line1">
        </mat-form-field>
        <mat-form-field>
          <input matInput type="text" [(ngModel)]="newCard.address_line2" placeholder="address_line2">
        </mat-form-field>
        <mat-form-field>
          <input matInput type="text" [(ngModel)]="newCard.address_state" placeholder="address_state">
        </mat-form-field>
        <mat-form-field>
          <input matInput type="text" [(ngModel)]="newCard.address_zip" placeholder="address_zip">
        </mat-form-field>
        <mat-form-field>
          <input matInput type="number" [(ngModel)]="newCard.exp_month" placeholder="exp_month">
        </mat-form-field>
        <mat-form-field>
          <input matInput type="number" [(ngModel)]="newCard.exp_year" placeholder="exp_year">
        </mat-form-field>
        <mat-form-field>
          <input matInput type="number" [(ngModel)]="newCard.number" placeholder="number">
        </mat-form-field>
        <mat-form-field>
          <input matInput type="number" [(ngModel)]="newCard.cvc" placeholder="cvc">
        </mat-form-field>
        <br> eg: 8<br> eg: 2018<br> eg: 4242424242424242<br> eg 123<br>


      </div>


      <div *ngFor="let card of stripeCust.sources.data; let i=index;">
        <mat-form-field>
          <input matInput readonly value="{{card.id}}" placeholder="cardId">
        </mat-form-field>
        <mat-form-field>
          <input matInput readonly value="{{card.address_city}}" placeholder="address_city">
        </mat-form-field>
        <mat-form-field>
          <input matInput readonly value="{{card.address_country}}" placeholder="address_country">
        </mat-form-field>
        <mat-form-field>
          <input matInput readonly value="{{card.address_line1}}" placeholder="address_line1">
        </mat-form-field>
        <mat-form-field>
          <input matInput readonly value="{{card.address_line2}}" placeholder="address_line2">
        </mat-form-field>
        <mat-form-field>
          <input matInput readonly value="{{card.address_state}}" placeholder="address_state">
        </mat-form-field>
        <mat-form-field>
          <input matInput readonly value="{{card.address_zip}}" placeholder="address_zip">
        </mat-form-field>
        <mat-form-field>
          <input matInput readonly value="{{card.brand}}" placeholder="brand">
        </mat-form-field>
        <mat-form-field>
          <input matInput readonly value="{{card.country}}" placeholder="country">
        </mat-form-field>
        <mat-form-field>
          <input matInput readonly value="{{card.exp_month}}" placeholder="exp_month">
        </mat-form-field>
        <mat-form-field>
          <input matInput readonly value="{{card.exp_year}}" placeholder="exp_year">
        </mat-form-field>
        <mat-form-field>
          <input matInput readonly value="{{card.funding}}" placeholder="funding">
        </mat-form-field>
        <mat-form-field>
          <input matInput readonly value="{{card.last4}}" placeholder="last4">
        </mat-form-field>

        <button mat-button color="warn" (click)="deleteCardInStripe(card.id)">delete Card</button>
      </div>
      <mat-action-row>
        <!-- <button mat-button color="warn" (click)="prevStep()">Previous</button> -->
        <button *ngIf="!stripeCust.sources.data.length" mat-button color="primary" (click)="saveCardInStripe()">saveCardInStripe</button>
        <button *ngIf="stripeCust.sources.data.length" mat-button color="primary" (click)="nextStep()">Next</button>
      </mat-action-row>
    </mat-expansion-panel>


    <mat-expansion-panel *ngIf="stripeCust.id && stripeCust.sources.data.length && plan" [expanded]="step === 3" (opened)="setStep(3)" hideToggle="true">
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{'Subscription' | translate}}
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div>
        <div *ngIf="!stripeCust.subscriptions.data.length">
          I confirm to suscribe to the:
          <button mat-raised-button color="primary" (click)="saveSubscriptionInStripe()">{{plan}} {{' Plan!' | translate}}</button>
        </div>
        <div *ngFor="let sub of stripeCust.subscriptions.data">
          <!-- <mat-icon color="primary">accessibility</mat-icon> -->
          <mat-form-field>
            <input matInput readonly value="{{sub.plan.id}}" placeholder="Plan">
          </mat-form-field>
          <mat-form-field>
            <input matInput readonly value="{{sub.plan.amount / 100 + ' ' + sub.plan.currency + ' / ' + sub.plan.interval}} " placeholder="Amount">
          </mat-form-field>
          <!-- <mat-form-field>
              <input matInput readonly value="{{sub.plan.created | timestampToDate | date: 'dd/MM/yyyy HH:mm'}}" placeholder="Created">
            </mat-form-field> -->
          <mat-form-field>
            <input matInput readonly value="{{sub.plan.interval_count}}" placeholder="interval_count">
          </mat-form-field>

          <!-- <mat-form-field>
              <input matInput readonly value="{{sub.id}}" placeholder="id">
            </mat-form-field>
            <mat-form-field>
              <input matInput readonly value="{{sub.created | timestampToDate | date: 'dd/MM/yyyy HH:mm'}}" placeholder="created">
            </mat-form-field> -->
          <mat-form-field>
            <input matInput readonly value="{{sub.current_period_start | timestampToDate | date: 'dd/MM/yyyy HH:mm'}}" placeholder="current_period_start">
          </mat-form-field>
          <mat-form-field>
            <input matInput readonly value="{{sub.current_period_end | timestampToDate | date: 'dd/MM/yyyy HH:mm'}}" placeholder="current_period_end">
          </mat-form-field>
          <button mat-button color="warn" (click)="deleteSubInStripe(sub.id)">deleteSubInStripe</button>
        </div>
      </div>
      <!-- <mat-action-row>
          <button mat-button color="warn" (click)="prevStep()">Previous</button>
          <button mat-button color="primary" (click)="nextStep()">End</button>
        </mat-action-row> -->
    </mat-expansion-panel>


    <mat-expansion-panel *ngIf="showReLoginInApp" [expanded]="step === 4" (opened)="setStep(4)" hideToggle="true">
      <mat-expansion-panel-header>
        {{'Password Confirmation'}}
      </mat-expansion-panel-header>
      {{'Confirm your password:' | translate}}
      <app-loginInApp (loginInAppDone)="loginInAppDone()"></app-loginInApp>
    </mat-expansion-panel>

  </mat-accordion>
  <app-loadingInApp [loading]="loading"></app-loadingInApp>
